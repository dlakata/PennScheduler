from icalendar import Calendar

# Test case
# d = {u'Prakhar': 'BEGIN:VCALENDAR\r\nPRODID:1377815283071\r\nVERSION:2.0\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130903T103000\r\nDTEND:20130903T120000\r\nSUMMARY:CINE101401\r\nDESCRIPTION:This course surveys the history of world film from cinema s p\r\n recursors to 1945. We will develop methods for analyzing film while exam\r\n ining the growth of film as an art\\, an industry\\, a technology\\, and a \r\n political instrument. Topics include the emergence of film technology an\r\n d early film audiences\\, the rise of narrative film and birth of Hollywo\r\n od\\, national film industries and movements\\, African-American independe\r\n nt film\\, the emergence of the genre film (the western\\, film noir\\, and\r\n  romantic comedies)\\, ethnographic and documentary film\\, animated films\r\n \\, censorship\\, the MPPDA and Hays Code\\, and the introduction of sound.\r\n  We will conclude with the transformation of several film industries int\r\n o propaganda tools during World War II (including the Nazi\\, Soviet\\, an\r\n d US film industries). In addition to contemporary theories that investi\r\n gate the development of cinema and visual culture during the first half \r\n of the 20th century\\, we will read key texts that contributed to the eme\r\n rgence of film theory. There are no prerequisites. Students are required\r\n  to attend screenings or watch films on their own.\r\nLOCATION:STIT B6\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130829T222803Z-1377815283072@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130829T103000\r\nDTEND:20130829T120000\r\nSUMMARY:CINE101401\r\nDESCRIPTION:This course surveys the history of world film from cinema s p\r\n recursors to 1945. We will develop methods for analyzing film while exam\r\n ining the growth of film as an art\\, an industry\\, a technology\\, and a \r\n political instrument. Topics include the emergence of film technology an\r\n d early film audiences\\, the rise of narrative film and birth of Hollywo\r\n od\\, national film industries and movements\\, African-American independe\r\n nt film\\, the emergence of the genre film (the western\\, film noir\\, and\r\n  romantic comedies)\\, ethnographic and documentary film\\, animated films\r\n \\, censorship\\, the MPPDA and Hays Code\\, and the introduction of sound.\r\n  We will conclude with the transformation of several film industries int\r\n o propaganda tools during World War II (including the Nazi\\, Soviet\\, an\r\n d US film industries). In addition to contemporary theories that investi\r\n gate the development of cinema and visual culture during the first half \r\n of the 20th century\\, we will read key texts that contributed to the eme\r\n rgence of film theory. There are no prerequisites. Students are required\r\n  to attend screenings or watch films on their own.\r\nLOCATION:STIT B6\r\nRRULE:FREQ=WEEKLY;WKST=TH;INTERVAL=1;UNTIL=20131210;BYDAY=TH\r\nUID:20130829T222804Z-1377815283083@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130902T110000\r\nDTEND:20130902T120000\r\nSUMMARY:CIS 120001\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:TOWN 100\r\nRRULE:FREQ=WEEKLY;WKST=MO;INTERVAL=1;UNTIL=20131210;BYDAY=MO\r\nUID:20130829T222805Z-1377815283085@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130828T110000\r\nDTEND:20130828T120000\r\nSUMMARY:CIS 120001\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:TOWN 100\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130829T222806Z-1377815283086@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130830T110000\r\nDTEND:20130830T120000\r\nSUMMARY:CIS 120001\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:TOWN 100\r\nRRULE:FREQ=WEEKLY;WKST=FR;INTERVAL=1;UNTIL=20131210;BYDAY=FR\r\nUID:20130829T222807Z-1377815283088@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130828T120000\r\nDTEND:20130828T130000\r\nSUMMARY:CIS 120201\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:MOOR 100A\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130829T222808Z-1377815283089@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130903T090000\r\nDTEND:20130903T103000\r\nSUMMARY:MATH114002\r\nDESCRIPTION:Functions of several variables\\, vector-valued functions\\, pa\r\n rtial derivatives and applications\\, double and triple integrals\\, conic\r\n  sections\\, polar coordinates\\, vectors and vector calculus\\, first orde\r\n r ordinary differential equations. Applications to physical sciences. Us\r\n e of symbolic manipulation and graphics software in calculus.\r\nLOCATION:COLL 200\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130829T222809Z-1377815283090@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130829T090000\r\nDTEND:20130829T103000\r\nSUMMARY:MATH114002\r\nDESCRIPTION:Functions of several variables\\, vector-valued functions\\, pa\r\n rtial derivatives and applications\\, double and triple integrals\\, conic\r\n  sections\\, polar coordinates\\, vectors and vector calculus\\, first orde\r\n r ordinary differential equations. Applications to physical sciences. Us\r\n e of symbolic manipulation and graphics software in calculus.\r\nLOCATION:COLL 200\r\nRRULE:FREQ=WEEKLY;WKST=TH;INTERVAL=1;UNTIL=20131210;BYDAY=TH\r\nUID:20130829T222810Z-1377815283091@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130828T080000\r\nDTEND:20130828T090000\r\nSUMMARY:MATH114217\r\nDESCRIPTION:Functions of several variables\\, vector-valued functions\\, pa\r\n rtial derivatives and applications\\, double and triple integrals\\, conic\r\n  sections\\, polar coordinates\\, vectors and vector calculus\\, first orde\r\n r ordinary differential equations. Applications to physical sciences. Us\r\n e of symbolic manipulation and graphics software in calculus.\r\nLOCATION:DRLB 3C8\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130829T222811Z-1377815283093@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130902T100000\r\nDTEND:20130902T110000\r\nSUMMARY:PHYS170301\r\nDESCRIPTION:This course parallels and extends the content of PHYS 150\\, a\r\n t a significantly higher mathematical level. Recommended for well-prepar\r\n ed students in engineering and the physical sciences\\, and particularly \r\n for those planning to major in physics. Classical laws of motion: intera\r\n ction between particles\\; conservation laws and symmetry principles\\; ri\r\n gid body motion\\; noninertial reference frames\\; oscillations.\r\nLOCATION:DRLB A6\r\nRRULE:FREQ=WEEKLY;WKST=MO;INTERVAL=1;UNTIL=20131210;BYDAY=MO\r\nUID:20130829T222812Z-1377815283094@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130902T140000\r\nDTEND:20130902T150000\r\nSUMMARY:PHYS170301\r\nDESCRIPTION:This course parallels and extends the content of PHYS 150\\, a\r\n t a significantly higher mathematical level. Recommended for well-prepar\r\n ed students in engineering and the physical sciences\\, and particularly \r\n for those planning to major in physics. Classical laws of motion: intera\r\n ction between particles\\; conservation laws and symmetry principles\\; ri\r\n gid body motion\\; noninertial reference frames\\; oscillations.\r\nLOCATION:DRLB A6\r\nRRULE:FREQ=WEEKLY;WKST=MO;INTERVAL=1;UNTIL=20131210;BYDAY=MO\r\nUID:20130829T222813Z-1377815283095@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130828T100000\r\nDTEND:20130828T110000\r\nSUMMARY:PHYS170301\r\nDESCRIPTION:This course parallels and extends the content of PHYS 150\\, a\r\n t a significantly higher mathematical level. Recommended for well-prepar\r\n ed students in engineering and the physical sciences\\, and particularly \r\n for those planning to major in physics. Classical laws of motion: intera\r\n ction between particles\\; conservation laws and symmetry principles\\; ri\r\n gid body motion\\; noninertial reference frames\\; oscillations.\r\nLOCATION:DRLB A6\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130829T222814Z-1377815283096@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130830T100000\r\nDTEND:20130830T110000\r\nSUMMARY:PHYS170301\r\nDESCRIPTION:This course parallels and extends the content of PHYS 150\\, a\r\n t a significantly higher mathematical level. Recommended for well-prepar\r\n ed students in engineering and the physical sciences\\, and particularly \r\n for those planning to major in physics. Classical laws of motion: intera\r\n ction between particles\\; conservation laws and symmetry principles\\; ri\r\n gid body motion\\; noninertial reference frames\\; oscillations.\r\nLOCATION:DRLB A6\r\nRRULE:FREQ=WEEKLY;WKST=FR;INTERVAL=1;UNTIL=20131210;BYDAY=FR\r\nUID:20130829T222815Z-1377815283097@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130903T150000\r\nDTEND:20130903T170000\r\nSUMMARY:PHYS170302\r\nDESCRIPTION:This course parallels and extends the content of PHYS 150\\, a\r\n t a significantly higher mathematical level. Recommended for well-prepar\r\n ed students in engineering and the physical sciences\\, and particularly \r\n for those planning to major in physics. Classical laws of motion: intera\r\n ction between particles\\; conservation laws and symmetry principles\\; ri\r\n gid body motion\\; noninertial reference frames\\; oscillations.\r\nLOCATION:DRLB LAB\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130829T222816Z-1377815283099@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130903T133000\r\nDTEND:20130903T150000\r\nSUMMARY:WRIT039307\r\nDESCRIPTION:\r\nLOCATION:DRLB 2C2\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130829T222817Z-1377815283100@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130829T222803Z\r\nDTSTART:20130829T133000\r\nDTEND:20130829T150000\r\nSUMMARY:WRIT039307\r\nDESCRIPTION:\r\nLOCATION:DRLB 2C2\r\nRRULE:FREQ=WEEKLY;WKST=TH;INTERVAL=1;UNTIL=20131210;BYDAY=TH\r\nUID:20130829T222818Z-1377815283101@fe80:0:0:0:250:56ff:feb4:e4a%2\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n', u'David': 'BEGIN:VCALENDAR\r\nPRODID:1378516914737\r\nVERSION:2.0\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130903T103000\r\nDTEND:20130903T120000\r\nSUMMARY:CINE101401\r\nDESCRIPTION:This course surveys the history of world film from cinema s p\r\n recursors to 1945. We will develop methods for analyzing film while exam\r\n ining the growth of film as an art\\, an industry\\, a technology\\, and a \r\n political instrument. Topics include the emergence of film technology an\r\n d early film audiences\\, the rise of narrative film and birth of Hollywo\r\n od\\, national film industries and movements\\, African-American independe\r\n nt film\\, the emergence of the genre film (the western\\, film noir\\, and\r\n  romantic comedies)\\, ethnographic and documentary film\\, animated films\r\n \\, censorship\\, the MPPDA and Hays Code\\, and the introduction of sound.\r\n  We will conclude with the transformation of several film industries int\r\n o propaganda tools during World War II (including the Nazi\\, Soviet\\, an\r\n d US film industries). In addition to contemporary theories that investi\r\n gate the development of cinema and visual culture during the first half \r\n of the 20th century\\, we will read key texts that contributed to the eme\r\n rgence of film theory. There are no prerequisites. Students are required\r\n  to attend screenings or watch films on their own.\r\nLOCATION:STIT B6\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130907T012154Z-1378516914739@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130829T103000\r\nDTEND:20130829T120000\r\nSUMMARY:CINE101401\r\nDESCRIPTION:This course surveys the history of world film from cinema s p\r\n recursors to 1945. We will develop methods for analyzing film while exam\r\n ining the growth of film as an art\\, an industry\\, a technology\\, and a \r\n political instrument. Topics include the emergence of film technology an\r\n d early film audiences\\, the rise of narrative film and birth of Hollywo\r\n od\\, national film industries and movements\\, African-American independe\r\n nt film\\, the emergence of the genre film (the western\\, film noir\\, and\r\n  romantic comedies)\\, ethnographic and documentary film\\, animated films\r\n \\, censorship\\, the MPPDA and Hays Code\\, and the introduction of sound.\r\n  We will conclude with the transformation of several film industries int\r\n o propaganda tools during World War II (including the Nazi\\, Soviet\\, an\r\n d US film industries). In addition to contemporary theories that investi\r\n gate the development of cinema and visual culture during the first half \r\n of the 20th century\\, we will read key texts that contributed to the eme\r\n rgence of film theory. There are no prerequisites. Students are required\r\n  to attend screenings or watch films on their own.\r\nLOCATION:STIT B6\r\nRRULE:FREQ=WEEKLY;WKST=TH;INTERVAL=1;UNTIL=20131210;BYDAY=TH\r\nUID:20130907T012155Z-1378516914750@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130902T110000\r\nDTEND:20130902T120000\r\nSUMMARY:CIS 120001\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:TOWN 100\r\nRRULE:FREQ=WEEKLY;WKST=MO;INTERVAL=1;UNTIL=20131210;BYDAY=MO\r\nUID:20130907T012156Z-1378516914752@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130828T110000\r\nDTEND:20130828T120000\r\nSUMMARY:CIS 120001\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:TOWN 100\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130907T012157Z-1378516914755@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130830T110000\r\nDTEND:20130830T120000\r\nSUMMARY:CIS 120001\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:TOWN 100\r\nRRULE:FREQ=WEEKLY;WKST=FR;INTERVAL=1;UNTIL=20131210;BYDAY=FR\r\nUID:20130907T012158Z-1378516914757@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130828T120000\r\nDTEND:20130828T130000\r\nSUMMARY:CIS 120201\r\nDESCRIPTION:A fast-paced introduction to the fundamental concepts of prog\r\n ramming and software design. This course assumes some previous programmi\r\n ng experience\\, at the level of a high school computer science class or \r\n CIS110. (If you got at least 4 in the AP Computer Science A or AB exam\\,\r\n  you will do great.) No specific programming language background is assu\r\n med: basic experience with any language (for instance Java\\, C\\, C++\\, V\r\n B\\, Python\\, Perl\\, or Scheme) is fine. If you have never programmed bef\r\n ore\\, you should take CIS 110 first.\r\nLOCATION:MOOR 100A\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130907T012159Z-1378516914759@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130903T090000\r\nDTEND:20130903T103000\r\nSUMMARY:MATH114002\r\nDESCRIPTION:Functions of several variables\\, vector-valued functions\\, pa\r\n rtial derivatives and applications\\, double and triple integrals\\, conic\r\n  sections\\, polar coordinates\\, vectors and vector calculus\\, first orde\r\n r ordinary differential equations. Applications to physical sciences. Us\r\n e of symbolic manipulation and graphics software in calculus.\r\nLOCATION:COLL 200\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130907T012200Z-1378516914761@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130829T090000\r\nDTEND:20130829T103000\r\nSUMMARY:MATH114002\r\nDESCRIPTION:Functions of several variables\\, vector-valued functions\\, pa\r\n rtial derivatives and applications\\, double and triple integrals\\, conic\r\n  sections\\, polar coordinates\\, vectors and vector calculus\\, first orde\r\n r ordinary differential equations. Applications to physical sciences. Us\r\n e of symbolic manipulation and graphics software in calculus.\r\nLOCATION:COLL 200\r\nRRULE:FREQ=WEEKLY;WKST=TH;INTERVAL=1;UNTIL=20131210;BYDAY=TH\r\nUID:20130907T012201Z-1378516914763@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130828T080000\r\nDTEND:20130828T090000\r\nSUMMARY:MATH114217\r\nDESCRIPTION:Functions of several variables\\, vector-valued functions\\, pa\r\n rtial derivatives and applications\\, double and triple integrals\\, conic\r\n  sections\\, polar coordinates\\, vectors and vector calculus\\, first orde\r\n r ordinary differential equations. Applications to physical sciences. Us\r\n e of symbolic manipulation and graphics software in calculus.\r\nLOCATION:DRLB 3C8\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130907T012202Z-1378516914765@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130903T120000\r\nDTEND:20130903T133000\r\nSUMMARY:PHYS150002\r\nDESCRIPTION:This calculus-based course is recommended for science majors \r\n and engineering students. Classical laws of motion\\; interactions betwee\r\n n particles\\; conservation laws and symmetry principles\\; particle and r\r\n igid body motion\\; gravitation\\, harmonic motion.\r\nLOCATION:DRLB A2\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130907T012203Z-1378516914767@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130903T170000\r\nDTEND:20130903T180000\r\nSUMMARY:PHYS150002\r\nDESCRIPTION:This calculus-based course is recommended for science majors \r\n and engineering students. Classical laws of motion\\; interactions betwee\r\n n particles\\; conservation laws and symmetry principles\\; particle and r\r\n igid body motion\\; gravitation\\, harmonic motion.\r\nLOCATION:DRLB A1\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130907T012204Z-1378516914769@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130828T130000\r\nDTEND:20130828T140000\r\nSUMMARY:PHYS150002\r\nDESCRIPTION:This calculus-based course is recommended for science majors \r\n and engineering students. Classical laws of motion\\; interactions betwee\r\n n particles\\; conservation laws and symmetry principles\\; particle and r\r\n igid body motion\\; gravitation\\, harmonic motion.\r\nLOCATION:DRLB A2\r\nRRULE:FREQ=WEEKLY;WKST=WE;INTERVAL=1;UNTIL=20131210;BYDAY=WE\r\nUID:20130907T012205Z-1378516914771@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130829T120000\r\nDTEND:20130829T133000\r\nSUMMARY:PHYS150002\r\nDESCRIPTION:This calculus-based course is recommended for science majors \r\n and engineering students. Classical laws of motion\\; interactions betwee\r\n n particles\\; conservation laws and symmetry principles\\; particle and r\r\n igid body motion\\; gravitation\\, harmonic motion.\r\nLOCATION:DRLB A2\r\nRRULE:FREQ=WEEKLY;WKST=TH;INTERVAL=1;UNTIL=20131210;BYDAY=TH\r\nUID:20130907T012206Z-1378516914773@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130830T130000\r\nDTEND:20130830T150000\r\nSUMMARY:PHYS150137\r\nDESCRIPTION:This calculus-based course is recommended for science majors \r\n and engineering students. Classical laws of motion\\; interactions betwee\r\n n particles\\; conservation laws and symmetry principles\\; particle and r\r\n igid body motion\\; gravitation\\, harmonic motion.\r\nLOCATION:DRLB LAB\r\nRRULE:FREQ=WEEKLY;WKST=FR;INTERVAL=1;UNTIL=20131210;BYDAY=FR\r\nUID:20130907T012207Z-1378516914775@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130903T133000\r\nDTEND:20130903T150000\r\nSUMMARY:WRIT039307\r\nDESCRIPTION:\r\nLOCATION:DRLB 2C2\r\nRRULE:FREQ=WEEKLY;WKST=TU;INTERVAL=1;UNTIL=20131210;BYDAY=TU\r\nUID:20130907T012208Z-1378516914777@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nBEGIN:VEVENT\r\nDTSTAMP:20130907T012154Z\r\nDTSTART:20130829T133000\r\nDTEND:20130829T150000\r\nSUMMARY:WRIT039307\r\nDESCRIPTION:\r\nLOCATION:DRLB 2C2\r\nRRULE:FREQ=WEEKLY;WKST=TH;INTERVAL=1;UNTIL=20131210;BYDAY=TH\r\nUID:20130907T012209Z-1378516914779@fe80:0:0:0:250:56ff:feb4:e37%3\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n'}
def prettyCourseName(course):
	course = course[:-3]
	if course[-4] == " ":
		return course
	else:
		return course[0:4] + " " + course[4:7]

def weekdays(day):
	daylist = {'MO':'02', 'TU':'03', 'WE':'04', 'TH':'05', 'FR':'06', 'SA':'07', 'SU':'08'}
	return daylist[day]

def shared(dictionary):
	all_list = []
	classtimes = {}
	classdays = {}

	for name in iter(dictionary):
		temp_list = [name]
		cal = dictionary[name]
		cal = Calendar.from_ical(cal)
		for component in cal.walk():
			if component.name == "VEVENT":
				course_name = component.get("SUMMARY")
				course_name = str(course_name)
				if course_name not in temp_list and "PREC" not in course_name:
					temp_list.append(course_name)

				day_of_week = component.get("RRULE")
				day_of_week = dict(day_of_week)
				day_of_week = str(day_of_week["WKST"])[3:5]

				start_time = component.get('DTSTART').dt
				start_time = str(start_time)[11:16]
				end_time = component.get('DTEND').dt
				end_time = str(end_time)[11:16]

				if course_name not in classtimes:
					classtimes[course_name] = [start_time, end_time]
				classdays.setdefault(course_name, []).append(day_of_week)
		all_list.append(temp_list)

	for course in classdays:
		t = classdays[course]
		t = list(set(t))
		classdays[course] = t

	students = {}
	for course_list in all_list:
		for course in course_list[1:]:
			students.setdefault(course, []).append(course_list[0])

	final = ""
	for course in students:
		if len(students[course]) > 1:
			# print prettyCourseName(course), students[course], classtimes[course], classdays[course]
			for day in classdays[course]:
				final += "{ title: '%s (%s)', start:'2013-09-%s %s:00', end:'2013-09-%s %s:00', allDay: false},\n" % (prettyCourseName(course), ", ".join(students[course]), weekdays(day), classtimes[course][0], weekdays(day), classtimes[course][1])
	return final[:-2]
# Main function: shared
# print shared(d)
